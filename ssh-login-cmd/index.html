<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>Run Command on SSH Login | Neil Grogan</title><link rel=apple-touch-icon sizes=180x180 href=../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../favicon-16x16.png><link rel=manifest href=../manifest.json><link rel=mask-icon href=../safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=../css/main.min.975b1911c008aee6ab5fb42e51274b8268ebcb65dc15bd4a5f69b9eedb485c3e.css></head><body><nav><header><div class=site-title><a href=../>Neil Grogan</a></div></header><div class=nav-menu><a class="color-link nav-link" href=../about>About</a>
<a class="color-link nav-link" href=../presentations/>Presentations</a>
<a class="color-link nav-link" href=../contact>Contact</a>
<a class="color-link nav-link" href=../tags/>Tags</a>
<a class="color-link nav-link" href=../feed.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons></div><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><script src=../js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin=anonymous></script></footer></nav><div id=content class=content-container><h1 class=post-title>Run Command on SSH Login</h1><time>November 30, 2016</time><div><p><p>Do you need to run a command on SSH login? There are a lot of solutions on the web for this, but most of them are very complex. I stumbled across this easy method of using the <code>authorized_keys</code> file, simply add <code>command="ls -l"</code> (replacing <code>ls -l</code> with something a bit more useful like <code>tmux</code> or <code>screen</code>) in front of the key fingerprint. This also means you can have different commands for different keys if you choose.</p><p>Example <code>authorized_keys</code> file:</p><pre><code>command=&quot;tmux a -t &lt;mysessionname&gt;&quot; ssh-rsa AAAAB3...
</code></pre><p>A lot of the other solutions you&rsquo;ll find on the web recommend editing profile, bashrc, ssh_config or some other important shell files - something you should avoid unless absolutely necessary. One more word of advice, make sure the command <em>will always execute sucessfully</em>. If the command fails <em>for any reason</em> (like a Tmux session not existing) your SSH connection will close, since this is the command that will keep it open. That&rsquo;s fine if you have access to the computer and have a screen attached to fix it, but if you are remote then you will be out of luck.</p><p>If you enjoyed this post, you should check out my post on <a href=../ssh-config>using patterns in SSH config file</a>.</p></p></div><div class=page-footer><hr class=footer-divider><a class=tag href=../tags/terminal>#terminal</a>
<a class=tag href=../tags/secure-shell>#secure-shell</a></div></div><footer class=footer-mobile><div class=social-icons></div><div class=footer-mobile-links><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p></div><script src=../js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin=anonymous></script></footer></body></html>